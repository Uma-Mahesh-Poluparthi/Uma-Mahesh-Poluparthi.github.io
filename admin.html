<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<h1>Admin Page</h1>

<!-- SUPABASE v2 -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>

<script>
const { createClient } = supabase;
const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// only you can login as admin (email check)
supabaseClient.auth.getUser().then(({ data }) => {
    if (!data.user || data.user.email !== "umamahe113@gmail.com") {
        alert("Unauthorized!");
        window.location.href = "login.html";
    }
});
</script>

<h2>Add Achievement</h2>

<input id="ach" placeholder="New Achievement">
<button onclick="addAch()">Add</button>

<div id="list"></div>

<script>
async function addAch() {
    let text = document.getElementById("ach").value.trim();
    if (!text) return alert("Enter text");

    await supabaseClient.from("achievements").insert([{ text }]);
    loadList();
}

async function loadList() {
    let { data } = await supabaseClient.from("achievements").select("*");
    document.getElementById("list").innerHTML =
        data.map(a => `<p>â€¢ ${a.text}</p>`).join("");
}

loadList();
</script>

<button onclick="logout()">Logout</button>

<script>
async function logout() {
    await supabaseClient.auth.signOut();
    window.location.href = "login.html";
}
</script>

</body>
</html>
