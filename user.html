<!DOCTYPE html>
<html>
<head>
    <title>User Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- SUPABASE v2 -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>

<script>
const { createClient } = supabase;
const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// BLOCK USERS WITHOUT SESSION
supabaseClient.auth.getSession().then(({ data }) => {
    if (!data.session) {
        window.location.href = "login.html";
    }
});
</script>

<h1>Welcome User</h1>
<p>Your achievements appear below:</p>

<div id="achBox"></div>

<script>
async function loadAch() {
    const { data, error } = await supabaseClient.from("achievements").select("*");

    document.getElementById("achBox").innerHTML =
        data.map(a => `<p>â€¢ ${a.text}</p>`).join("");
}
loadAch();
</script>

<button onclick="logout()">Logout</button>

<script>
async function logout() {
    await supabaseClient.auth.signOut();
    window.location.href = "login.html";
}
</script>

</body>
</html>
